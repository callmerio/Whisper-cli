# 📁 Whisper-CLI 项目结构

```
Whisper-cli/
├── 📄 main.py                 # 主程序入口
├── ⚙️ config.py              # 配置文件
├── 🎙️ audio_recorder.py      # 音频录制模块
├── 🧠 transcriber.py         # Whisper转录模块
├── 🤖 gemini_corrector.py    # Gemini AI纠错模块
├── 🎯 hotkey_listener.py     # 全局快捷键监听
├── 📚 dictionary_manager.py  # 用户词典管理
├── ⏱️ timer_utils.py         # 计时工具模块
├── 📋 dic.txt                # 用户词典文件
├── 🔧 proxy_test.py          # 代理测试工具
├── 🚀 启动脚本.sh            # 一键启动脚本
├── 🛠️ setup_env.sh           # 环境配置脚本
├── 📦 pyproject.toml         # uv 项目配置
├── 📦 requirements.txt       # pip 依赖列表
├── 🔒 uv.lock               # uv 锁定文件
├── 📝 README.md             # 项目说明文档
├── 📝 项目结构.md            # 本文件
├── 🔧 CLAUDE.md             # Claude 配置文件
├── 🌍 .env.sample           # 环境变量模板
└── 🚫 .gitignore           # Git 忽略文件
```

## 📄 核心模块说明

### 🎯 main.py
- **功能**: 主程序入口，协调所有模块
- **职责**: 状态管理、流程控制、用户界面
- **关键类**: `VoiceTranscriptionApp`

### ⚙️ config.py  
- **功能**: 集中配置管理
- **内容**: 音频参数、模型设置、API密钥、功能开关
- **特点**: 支持环境变量和代理配置

### 🎙️ audio_recorder.py
- **功能**: 实时音频录制
- **特点**: 动态缓冲、无时长限制、多线程处理
- **关键类**: `AudioRecorder`

### 🧠 transcriber.py
- **功能**: whisper.cpp 语音转录
- **支持**: 多种模型、多语言、自定义参数
- **关键类**: `WhisperTranscriber`

### 🤖 gemini_corrector.py
- **功能**: AI智能纠错和标点优化
- **特点**: 代理支持、可配置提示词、错误处理
- **关键类**: `GeminiCorrector`

### 🎯 hotkey_listener.py
- **功能**: 全局快捷键监听
- **支持**: 双击Option键检测、macOS辅助功能
- **关键类**: `HotkeyListener`

### 📚 dictionary_manager.py
- **功能**: 用户自定义词典管理
- **特点**: 权重系统、模糊匹配、统计分析
- **关键类**: `DictionaryManager`

### ⏱️ timer_utils.py
- **功能**: 高精度性能计时
- **特点**: 毫秒级精度、上下文管理器、统计摘要
- **关键类**: `Timer`

## 🔄 数据流程

```
录音开始 → 音频录制 → whisper转录 → 词典优化 → 剪贴板复制 → Gemini纠错 → 更新剪贴板 → 显示结果
   ↓          ↓          ↓          ↓           ↓           ↓          ↓          ↓
 计时开始   → 音频缓存  → CLI调用   → 文本处理  → 系统剪贴板 → API调用  → 覆盖剪贴板 → 计时统计
```

## 📊 配置层次

1. **硬编码默认值** (代码中)
2. **config.py 配置** (项目配置)
3. **环境变量** (.env 文件)
4. **命令行参数** (未实现)

## 🛠️ 扩展接口

- **音频处理**: 继承 `AudioRecorder` 
- **转录引擎**: 继承 `WhisperTranscriber`
- **纠错服务**: 继承 `GeminiCorrector`
- **快捷键**: 扩展 `HotkeyListener`
- **词典算法**: 扩展 `DictionaryManager`

## 📈 性能监控点

- 录音时长测量
- Whisper转录耗时
- 词典处理时间
- 网络请求延迟
- 剪贴板操作时间
- 总处理时间统计

---

**🎯 模块化设计，易于维护和扩展！**